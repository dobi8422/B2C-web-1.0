(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-688ddeaf"],{1148:function(t,e,c){"use strict";var a=c("a691"),o=c("577e"),n=c("1d80");t.exports=function(t){var e=o(n(this)),c="",i=a(t);if(i<0||i==1/0)throw RangeError("Wrong number of repetitions");for(;i>0;(i>>>=1)&&(e+=e))1&i&&(c+=e);return c}},1799:function(t,e,c){"use strict";var a=c("7a23"),o=function(t){return Object(a["A"])("data-v-19c3f988"),t=t(),Object(a["y"])(),t},n={"aria-label":"Page navigation",class:"justify-content-center d-flex"},i={class:"pagination"},r=o((function(){return Object(a["g"])("span",{"aria-hidden":"true"},"«",-1)})),l=[r],s=["onClick"],d=o((function(){return Object(a["g"])("span",{"aria-hidden":"true"},"»",-1)})),u=[d];function b(t,e,c,o,r,d){return Object(a["x"])(),Object(a["f"])("nav",n,[Object(a["g"])("ul",i,[Object(a["g"])("li",{class:Object(a["r"])(["page-item",{disabled:!c.pages.has_pre}])},[Object(a["g"])("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:e[0]||(e[0]=Object(a["S"])((function(t){return d.getProductPages(c.pages.current_page-1)}),["prevent"]))},l)],2),(Object(a["x"])(!0),Object(a["f"])(a["a"],null,Object(a["E"])(c.pages.total_pages,(function(t){return Object(a["x"])(),Object(a["f"])("li",{class:Object(a["r"])(["page-item",{active:c.pages.current_page===t}]),key:t},[Object(a["g"])("a",{class:"page-link",href:"#",onClick:Object(a["S"])((function(e){return d.getProductPages(t)}),["prevent"])},Object(a["I"])(t),9,s)],2)})),128)),Object(a["g"])("li",{class:Object(a["r"])(["page-item",{disabled:!c.pages.has_next}])},[Object(a["g"])("a",{class:"page-link",href:"#","aria-label":"Next",onClick:e[1]||(e[1]=Object(a["S"])((function(t){return d.getProductPages(c.pages.current_page+1)}),["prevent"]))},u)],2)])])}var p={name:"Pagination",props:["pages"],methods:{getProductPages:function(t){this.$emit("emitProductPage",t)}}},g=(c("41d2"),c("6b0d")),f=c.n(g);const m=f()(p,[["render",b],["__scopeId","data-v-19c3f988"]]);e["a"]=m},"408a":function(t,e){var c=1..valueOf;t.exports=function(t){return c.call(t)}},"41d2":function(t,e,c){"use strict";c("c33b")},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,c){var a=c("1d80"),o=c("577e"),n=c("5899"),i="["+n+"]",r=RegExp("^"+i+i+"*"),l=RegExp(i+i+"*$"),s=function(t){return function(e){var c=o(a(e));return 1&t&&(c=c.replace(r,"")),2&t&&(c=c.replace(l,"")),c}};t.exports={start:s(1),end:s(2),trim:s(3)}},7156:function(t,e,c){var a=c("1626"),o=c("861d"),n=c("d2bb");t.exports=function(t,e,c){var i,r;return n&&a(i=e.constructor)&&i!==c&&o(r=i.prototype)&&r!==c.prototype&&n(t,r),t}},a9e3:function(t,e,c){"use strict";var a=c("83ab"),o=c("da84"),n=c("94ca"),i=c("6eeb"),r=c("5135"),l=c("c6b6"),s=c("7156"),d=c("d9b5"),u=c("c04e"),b=c("d039"),p=c("7c73"),g=c("241c").f,f=c("06cf").f,m=c("9bf2").f,O=c("58a8").trim,j="Number",h=o[j],v=h.prototype,P=l(p(v))==j,x=function(t){if(d(t))throw TypeError("Cannot convert a Symbol value to a number");var e,c,a,o,n,i,r,l,s=u(t,"number");if("string"==typeof s&&s.length>2)if(s=O(s),e=s.charCodeAt(0),43===e||45===e){if(c=s.charCodeAt(2),88===c||120===c)return NaN}else if(48===e){switch(s.charCodeAt(1)){case 66:case 98:a=2,o=49;break;case 79:case 111:a=8,o=55;break;default:return+s}for(n=s.slice(2),i=n.length,r=0;r<i;r++)if(l=n.charCodeAt(r),l<48||l>o)return NaN;return parseInt(n,a)}return+s};if(n(j,!h(" 0o1")||!h("0b1")||h("+0x1"))){for(var y,w=function(t){var e=arguments.length<1?0:t,c=this;return c instanceof w&&(P?b((function(){v.valueOf.call(c)})):l(c)!=j)?s(new h(x(e)),c,w):x(e)},N=a?g(h):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),k=0;N.length>k;k++)r(h,y=N[k])&&!r(w,y)&&m(w,y,f(h,y));w.prototype=v,v.constructor=w,i(o,j,w)}},b680:function(t,e,c){"use strict";var a=c("23e7"),o=c("a691"),n=c("408a"),i=c("1148"),r=c("d039"),l=1..toFixed,s=Math.floor,d=function(t,e,c){return 0===e?c:e%2===1?d(t,e-1,c*t):d(t*t,e/2,c)},u=function(t){var e=0,c=t;while(c>=4096)e+=12,c/=4096;while(c>=2)e+=1,c/=2;return e},b=function(t,e,c){var a=-1,o=c;while(++a<6)o+=e*t[a],t[a]=o%1e7,o=s(o/1e7)},p=function(t,e){var c=6,a=0;while(--c>=0)a+=t[c],t[c]=s(a/e),a=a%e*1e7},g=function(t){var e=6,c="";while(--e>=0)if(""!==c||0===e||0!==t[e]){var a=String(t[e]);c=""===c?a:c+i.call("0",7-a.length)+a}return c},f=l&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!r((function(){l.call({})}));a({target:"Number",proto:!0,forced:f},{toFixed:function(t){var e,c,a,r,l=n(this),s=o(t),f=[0,0,0,0,0,0],m="",O="0";if(s<0||s>20)throw RangeError("Incorrect fraction digits");if(l!=l)return"NaN";if(l<=-1e21||l>=1e21)return String(l);if(l<0&&(m="-",l=-l),l>1e-21)if(e=u(l*d(2,69,1))-69,c=e<0?l*d(2,-e,1):l/d(2,e,1),c*=4503599627370496,e=52-e,e>0){b(f,0,c),a=s;while(a>=7)b(f,1e7,0),a-=7;b(f,d(10,a,1),0),a=e-1;while(a>=23)p(f,1<<23),a-=23;p(f,1<<a),b(f,1,1),p(f,2),O=g(f)}else b(f,0,c),b(f,1<<-e,0),O=g(f)+i.call("0",s);return s>0?(r=O.length,O=m+(r<=s?"0."+i.call("0",s-r)+O:O.slice(0,r-s)+"."+O.slice(r-s))):O=m+O,O}})},c33b:function(t,e,c){},e01a:function(t,e,c){"use strict";var a=c("23e7"),o=c("83ab"),n=c("da84"),i=c("5135"),r=c("1626"),l=c("861d"),s=c("9bf2").f,d=c("e893"),u=n.Symbol;if(o&&r(u)&&(!("description"in u.prototype)||void 0!==u().description)){var b={},p=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof p?new u(t):void 0===t?u():u(t);return""===t&&(b[e]=!0),e};d(p,u);var g=p.prototype=u.prototype;g.constructor=p;var f=g.toString,m="Symbol(test)"==String(u("test")),O=/^Symbol\((.*)\)[^)]+$/;s(g,"description",{configurable:!0,get:function(){var t=l(this)?this.valueOf():this,e=f.call(t);if(i(b,t))return"";var c=m?e.slice(7,-1):e.replace(O,"$1");return""===c?void 0:c}}),a({global:!0,forced:!0},{Symbol:p})}},f16f:function(t,e,c){"use strict";c.r(e);c("a4d3"),c("e01a");var a=c("7a23"),o={class:"d-flex justify-content-around mx-5"},n=Object(a["g"])("div",null,null,-1),i=Object(a["g"])("h2",{class:"text-center mt-3"},"產品列表",-1),r={class:"table mt-4 container"},l=Object(a["g"])("thead",{class:"bg-dark text-light"},[Object(a["g"])("tr",null,[Object(a["g"])("th",{width:"50"},"啟用"),Object(a["g"])("th",{width:"120"},"產品名稱"),Object(a["g"])("th",{width:"60"},"分類"),Object(a["g"])("th",{width:"60"},"售價"),Object(a["g"])("th",{class:"text-muted",width:"60"},"原價"),Object(a["g"])("th",{width:"30"},"編輯")])],-1),s=["onClick","onUpdate:modelValue"],d={class:"text-right"},u={class:"text-right text-muted"},b={class:"d-flex justify-content-center"},p=["onClick"],g=["onClick"],f={class:"modal fade",id:"productModal",tabindex:"-1","aria-labelledby":"productModalLabel","aria-hidden":"true"},m={class:"modal-dialog"},O={class:"modal-content"},j={class:"modal-header bg-dark text-light"},h={class:"modal-title",id:"productModalLabel"},v=Object(a["g"])("i",{class:"fas fa-cog"},null,-1),P={class:"form-check"},x=Object(a["g"])("label",{class:"form-check-label",for:"is_enabled"},"啟用",-1),y={class:"modal-body row g-3"},w={class:"col-sm-5"},N=Object(a["g"])("label",null,"圖片網址 or 上傳圖片",-1),k=["src"],_={key:1,class:"spinner-border my-5",role:"status"},I=Object(a["g"])("span",{class:"visually-hidden"},"Loading...",-1),M=[I],U={class:"col-sm-7"},E={class:"row g-2"},C={class:"col-md-12"},F=Object(a["g"])("label",null,"標題",-1),S={class:"col-md-6"},R=Object(a["g"])("label",null,"分類",-1),V=Object(a["h"])('<option value="巧克力">巧克力</option><option value="乳酪愛好者">乳酪愛好者</option><option value="慶生系列">慶生系列</option><option value="卡通造型">卡通造型</option><option value="小點心">小點心</option>',5),z=[V],A={class:"col-md-6"},L=Object(a["g"])("label",{for:"price"},"單位",-1),T={class:"form-group col-md-6"},$=Object(a["g"])("label",{for:"price"},"售價",-1),G={class:"form-group col-md-6"},J=Object(a["g"])("label",{for:"origin_price",class:"text-muted"},"原價",-1),D={class:"col-md-12 row g-1 px-2"},W=Object(a["g"])("label",{for:"description"},"產品介紹",-1),X=Object(a["g"])("label",{for:"content"},"注意事項",-1),Y={class:"col-md-12"},q=Object(a["g"])("button",{type:"button",class:"btn btn-outline-secondary me-1","data-bs-dismiss":"modal"},"取消",-1),B={class:"modal fade",id:"deleteModal",tabindex:"-1","aria-labelledby":"deleteModalLabel","aria-hidden":"true"},H={class:"modal-dialog"},Q={class:"modal-content"},K=Object(a["g"])("div",{class:"modal-header bg-dark text-light"},[Object(a["g"])("h5",{class:"modal-title",id:"deleteModalLabel"},[Object(a["g"])("i",{class:"fas fa-trash-alt"}),Object(a["i"])(" 刪除產品")])],-1),Z={class:"modal-body row g-3"},tt={class:"col-12"},et=Object(a["i"])(" 是否刪除 "),ct={class:"text-danger"},at=Object(a["i"])(" 商品 (刪除後將無法恢復)。 "),ot={class:"col-12"},nt=Object(a["g"])("button",{type:"button",class:"btn btn-outline-secondary me-1","data-bs-dismiss":"modal"},"取消",-1);function it(t,e,c,I,V,it){var rt=Object(a["F"])("Pagination");return Object(a["x"])(),Object(a["f"])("div",null,[Object(a["g"])("div",o,[n,i,Object(a["g"])("button",{class:"btn btn-outline-primary","data-bs-toggle":"modal","data-bs-target":"#productModal",onClick:e[0]||(e[0]=function(t){return V.isNew=!0,V.tempProduct={}})},"新增產品")]),Object(a["g"])("table",r,[l,Object(a["g"])("tbody",null,[(Object(a["x"])(!0),Object(a["f"])(a["a"],null,Object(a["E"])(t.products,(function(t){return Object(a["x"])(),Object(a["f"])("tr",{key:t.id},[Object(a["g"])("td",null,[Object(a["R"])(Object(a["g"])("input",{class:"form-check-input",onClick:function(e){return V.tempProduct=Object.assign({},t),it.enableProduct()},type:"checkbox","onUpdate:modelValue":function(e){return t.is_enabled=e},"true-value":1,"false-value":0,id:"is_enabled"},null,8,s),[[a["L"],t.is_enabled]])]),Object(a["g"])("td",null,Object(a["I"])(t.title),1),Object(a["g"])("td",null,Object(a["I"])(t.category),1),Object(a["g"])("td",d,Object(a["I"])(it.currency(t.price)),1),Object(a["g"])("td",u,Object(a["I"])(it.currency(t.origin_price)),1),Object(a["g"])("td",null,[Object(a["g"])("div",b,[Object(a["g"])("button",{class:"btn btn-outline-primary btn-sm me-1","data-bs-toggle":"modal","data-bs-target":"#productModal",onClick:function(e){return V.tempProduct=Object.assign({},t),V.isNew=!1}},"編輯",8,p),Object(a["g"])("button",{class:"btn btn-outline-danger btn-sm","data-bs-toggle":"modal","data-bs-target":"#deleteModal",onClick:function(e){return V.tempProduct=Object.assign({},t)}},"刪除",8,g)])])])})),128))])]),Object(a["j"])(rt,{pages:t.pagination,onEmitProductPage:it.getProducts},null,8,["pages","onEmitProductPage"]),Object(a["g"])("div",f,[Object(a["g"])("div",m,[Object(a["g"])("div",O,[Object(a["g"])("div",j,[Object(a["g"])("h5",h,[v,Object(a["i"])(" "+Object(a["I"])(V.isNew?"新增產品":"編輯產品"),1)]),Object(a["g"])("div",P,[x,Object(a["R"])(Object(a["g"])("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":e[1]||(e[1]=function(t){return V.tempProduct.is_enabled=t}),"true-value":1,"false-value":0,id:"is_enabled"},null,512),[[a["L"],V.tempProduct.is_enabled]])])]),Object(a["g"])("div",y,[Object(a["g"])("div",w,[N,Object(a["R"])(Object(a["g"])("input",{type:"text",class:"form-control",id:"image",placeholder:"請輸入圖片連結","onUpdate:modelValue":e[2]||(e[2]=function(t){return V.tempProduct.imageUrl=t})},null,512),[[a["N"],V.tempProduct.imageUrl]]),Object(a["g"])("input",{type:"file",id:"customFile",class:"form-control mt-2",ref:"files",onChange:e[3]||(e[3]=function(){return it.uploadFile&&it.uploadFile.apply(it,arguments)})},null,544),V.status.fileUploading?Object(a["e"])("",!0):(Object(a["x"])(),Object(a["f"])("img",{key:0,img:"https://images.unsplash.com/photo-1483985988355-763728e1935b?ixlib=rb-0.3.5&ixid=eyJhcHBfaWQiOjEyMDd9&s=828346ed697837ce808cae68d3ddc3cf&auto=format&fit=crop&w=1350&q=80",class:"img-fluid mt-2",alt:"",src:V.tempProduct.imageUrl},null,8,k)),V.status.fileUploading?(Object(a["x"])(),Object(a["f"])("div",_,M)):Object(a["e"])("",!0)]),Object(a["g"])("div",U,[Object(a["g"])("div",E,[Object(a["g"])("div",C,[F,Object(a["R"])(Object(a["g"])("input",{type:"text",class:"form-control",id:"title",placeholder:"請輸入標題","onUpdate:modelValue":e[4]||(e[4]=function(t){return V.tempProduct.title=t})},null,512),[[a["N"],V.tempProduct.title]])]),Object(a["g"])("div",S,[R,Object(a["R"])(Object(a["g"])("select",{class:"form-control",id:"category","onUpdate:modelValue":e[5]||(e[5]=function(t){return V.tempProduct.category=t})},z,512),[[a["M"],V.tempProduct.category]])]),Object(a["g"])("div",A,[L,Object(a["R"])(Object(a["g"])("input",{type:"unit",class:"form-control",id:"unit",placeholder:"請輸入單位","onUpdate:modelValue":e[6]||(e[6]=function(t){return V.tempProduct.unit=t})},null,512),[[a["N"],V.tempProduct.unit]])]),Object(a["g"])("div",T,[$,Object(a["R"])(Object(a["g"])("input",{type:"number",class:"form-control",id:"price",placeholder:"請輸入售價","onUpdate:modelValue":e[7]||(e[7]=function(t){return V.tempProduct.price=t})},null,512),[[a["N"],V.tempProduct.price]])]),Object(a["g"])("div",G,[J,Object(a["R"])(Object(a["g"])("input",{type:"number",class:"form-control text-muted",id:"origin_price",placeholder:"請輸入原價","onUpdate:modelValue":e[8]||(e[8]=function(t){return V.tempProduct.origin_price=t})},null,512),[[a["N"],V.tempProduct.origin_price]])])])]),Object(a["g"])("div",D,[W,Object(a["R"])(Object(a["g"])("textarea",{type:"text",class:"form-control",style:{resize:"none",height:"80px"},id:"description",placeholder:"請輸入產品描述","onUpdate:modelValue":e[9]||(e[9]=function(t){return V.tempProduct.description=t})},null,512),[[a["N"],V.tempProduct.description]]),X,Object(a["R"])(Object(a["g"])("textarea",{type:"text",class:"form-control",style:{resize:"none",height:"80px"},id:"content",placeholder:"請輸入產品說明內容","onUpdate:modelValue":e[10]||(e[10]=function(t){return V.tempProduct.content=t})},null,512),[[a["N"],V.tempProduct.content]])]),Object(a["g"])("div",Y,[q,Object(a["g"])("button",{type:"button",class:"btn btn-primary ms-1","data-bs-dismiss":"modal",onClick:e[11]||(e[11]=function(){return it.updateProduct&&it.updateProduct.apply(it,arguments)})},Object(a["I"])(V.isNew?"新增":"編輯"),1)])])])])]),Object(a["g"])("div",B,[Object(a["g"])("div",H,[Object(a["g"])("div",Q,[K,Object(a["g"])("div",Z,[Object(a["g"])("div",tt,[et,Object(a["g"])("strong",ct,Object(a["I"])(V.tempProduct.title),1),at]),Object(a["g"])("div",ot,[nt,Object(a["g"])("button",{type:"button",class:"btn btn-danger ms-1","data-bs-dismiss":"modal",onClick:e[12]||(e[12]=function(){return it.deleteProduct&&it.deleteProduct.apply(it,arguments)})},"確認刪除")])])])])])])}var rt=c("5530"),lt=(c("99af"),c("a9e3"),c("ac1f"),c("5319"),c("b680"),c("5502")),st=c("1799"),dt={data:function(){return{tempProduct:{},isNew:!1,status:{fileUploading:!1},action:""}},components:{Pagination:st["a"]},methods:Object(rt["a"])({getProducts:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.getProducts(t)},updateProduct:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("zxz189","/admin/product"),c="post";this.isNew?this.action="新增":(e="".concat("https://vue-course-api.hexschool.io","/api/").concat("zxz189","/admin/product/").concat(this.tempProduct.id),c="put",this.action="編輯"),this.axios[c](e,{data:this.tempProduct}).then((function(e){e.data.success?(t.alertMessage("產品".concat(t.action,"成功")),t.getProducts(),t.tempProduct={}):t.alertMessage("產品".concat(t.action,"失敗"))}))},deleteProduct:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("zxz189","/admin/product/").concat(this.tempProduct.id);this.action="刪除",this.axios.delete(e).then((function(e){e.data.success?(t.alertMessage("成功".concat(t.action,"產品：").concat(t.tempProduct.title)),t.getProducts()):t.alertMessage("產品".concat(t.action,"失敗"))}))},enableProduct:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("zxz189","/admin/product/").concat(this.tempProduct.id);0===this.tempProduct.is_enabled?(this.action="啟用",this.tempProduct.is_enabled=1):(this.action="停用",this.tempProduct.is_enabled=0),this.axios.put(e,{data:this.tempProduct}).then((function(e){e.data.success?(t.getProducts(),t.alertMessage("產品".concat(t.action,"成功"))):t.alertMessage("產品".concat(t.action,"失敗"))}))},uploadFile:function(){var t=this,e=this.$refs.files.files[0],c=new FormData;c.append("file-to-upload",e);var a="".concat("https://vue-course-api.hexschool.io","/api/").concat("zxz189","/admin/upload");this.status.fileUploading=!0,this.axios.post(a,c,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){t.status.fileUploading=!1,e.data.success?t.tempProduct.imageUrl=e.data.imageUrl:t.alertMessage("".concat(e.data))}))},currency:function(t){var e=Number(t);return"$".concat(e.toFixed(0).replace(/./g,(function(t,e,c){var a=e&&"."!==t&&(c.length-e)%3===0?", ".concat(t).replace(/\s/g,""):t;return a})))}},Object(lt["b"])(["updateLoading","getProducts","alertMessage"])),computed:Object(rt["a"])({},Object(lt["c"])(["products","pagination"])),created:function(){this.getProducts()}},ut=c("6b0d"),bt=c.n(ut);const pt=bt()(dt,[["render",it]]);e["default"]=pt}}]);
//# sourceMappingURL=chunk-688ddeaf.71610c67.js.map